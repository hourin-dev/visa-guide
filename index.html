<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>비자 행정 전문가 시스템 v1.2.0</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
    <div class="header">
        <span class="ver-badge">v1.2.0</span>
        <small>법무법인 대림 (DAELIM)</small>
        <h1>비자 추천 & 행정 분석 시스템</h1>
        <p>이규희 사무장 정밀 분석 모듈</p>
    </div>

    <div class="content">
        <div class="form-group">
            <label>🔐 보안 인증 (API Key)</label>
            <input type="password" id="apiKey" placeholder="Google Gemini API 키 입력">
            <div style="font-size: 0.8rem; margin-top: 5px;">
                <input type="checkbox" id="chkSaveKey" checked> <label for="chkSaveKey">인증키 저장</label>
            </div>
        </div>

        <div class="section-title">
            <span>📂 정책 데이터 동기화</span>
            <span id="file-label" class="status-badge status-wait">미등록</span>
        </div>
        <div class="form-group" style="text-align:center;">
            <input type="file" id="pdfFile" accept="application/pdf">
            <button id="upload-btn" class="btn-primary" style="background: #34495e; margin-top: 15px;">출입국정책 업로드</button>
            <div id="progress-container" style="display:none; width: 100%; background: #e0e0e0; height: 24px; border-radius: 12px; margin-top: 20px; overflow: hidden; position: relative;">
                <div id="progress-bar" style="width: 0%; height: 100%; background: linear-gradient(90deg, #27ae60, #2ecc71);"></div>
                <div id="progress-text" style="position: absolute; width: 100%; text-align: center; top: 0; line-height: 24px; font-weight: bold;">0%</div>
            </div>
        </div>

        <div class="section-title">📝 의뢰인 정보 입력</div>
        <div class="form-group"><label>성명</label><input type="text" id="clientName"></div>
        <div class="row">
            <div class="col form-group"><label>현재 비자</label><input type="text" id="visaType" value="E-9"></div>
            <div class="col form-group"><label>생년월일</label><input type="date" id="birthDate" value="1995-05-20"></div>
        </div>
        <div class="row">
            <div class="col form-group"><label>전년 소득(만원)</label><input type="number" id="income" value="3500"></div>
            <div class="col form-group">
                <label>한국어 능력 (전체 리스트)</label>
                <select id="koreanSkill">
                    <option value="미보유">미보유</option>
                    <optgroup label="TOPIK">
                        <option value="TOPIK 6급">TOPIK 6급</option><option value="TOPIK 5급">TOPIK 5급</option>
                        <option value="TOPIK 4급">TOPIK 4급</option><option value="TOPIK 3급">TOPIK 3급</option>
                        <option value="TOPIK 2급">TOPIK 2급</option><option value="TOPIK 1급">TOPIK 1급</option>
                    </optgroup>
                    <optgroup label="KIIP (사회통합)">
                        <option value="KIIP 5단계 이수">KIIP 5단계 이수</option>
                        <option value="KIIP 4단계 합격" selected>KIIP 4단계 합격</option>
                        <option value="KIIP 3단계 합격">KIIP 3단계 합격</option>
                    </optgroup>
                    <optgroup label="KIIP 사전평가">
                        <option value="사전평가 85점 이상">85점↑ (5단계)</option>
                        <option value="사전평가 61-84점">61-84점 (4단계)</option>
                    </optgroup>
                </select>
            </div>
        </div>

        <div class="section-title">⚖️ 점수제 분석 항목</div>
        <div class="row">
            <div class="col form-group">
                <label>학력</label>
                <select id="education">
                    <option value="고졸">고졸</option>
                    <option value="전문학사">국내 전문학사</option>
                    <option value="학사">국내 학사</option>
                </select>
            </div>
            <div class="col form-group">
                <label>근무 지역</label>
                <select id="location">
                    <option value="일반">일반 시/도</option>
                    <option value="인구감소지역">인구감소지역 (가점)</option>
                </select>
            </div>
        </div>
        <div class="form-group"><label>특이사항</label><textarea id="details">용접기능사 보유, 4년 이상 근무.</textarea></div>

        <button class="btn-primary" id="run-btn">⚖️ 정밀 분석 리포트 생성</button>
        <div id="status-log" style="margin-top:20px; background:#1e1e1e; color:#0f0; padding:10px; font-family:monospace; font-size:0.8rem; display:none;"></div>
        <div id="result-box" style="margin-top:30px; display:none; border:1px solid #ddd; padding:20px;">
            <div id="result-content"></div>
        </div>
    </div>
</div>

<script src="config.js" defer></script>
<script src="api.js" defer></script>
<script src="main.js" defer></script>
</body>
</html>